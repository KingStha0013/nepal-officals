<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Nepal Government Officials</title>
<style>
  :root {
    --bg: #f4f6fa;
    --text: #1c1c1c;
    --card: #ffffff;
    --accent: #c8102e;
    --accent-blue: #003893;
    --shadow: rgba(0,0,0,0.08);
  }
  .dark {
    --bg: #0f1116;
    --text: #eaeaea;
    --card: #1a1d24;
    --shadow: rgba(0,0,0,0.5);
  }
  body {
    margin: 0;
    font-family: "Segoe UI", Tahoma, sans-serif;
    background: var(--bg);
    color: var(--text);
    transition: background 0.3s, color 0.3s;
  }
  header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 14px 18px;
    background: linear-gradient(90deg, var(--accent), var(--accent-blue));
    color: white;
    box-shadow: 0 3px 10px var(--shadow);
    position: sticky;
    top: 0;
    z-index: 10;
  }
  header .title {
    display: flex;
    align-items: center;
    gap: 10px;
    font-weight: bold;
    font-size: 18px;
  }
  header img {
    height: 36px;
    border-radius: 4px;
    background: white;
    padding: 2px;
  }
  .toggles {
    display: flex;
    gap: 8px;
    align-items: center;
  }
  .toggle {
    cursor: pointer;
    border: none;
    border-radius: 50%;
    width: 34px;
    height: 34px;
    font-size: 16px;
    background: white;
    color: var(--accent);
    box-shadow: 0 2px 6px var(--shadow);
  }
  .search-box {
    margin: 16px;
    display: flex;
    justify-content: center;
  }
  .search-box input {
    padding: 10px 12px;
    border: 1px solid #ccc;
    border-radius: 30px;
    font-size: 15px;
    outline: none;
    box-shadow: 0 2px 6px var(--shadow);
    flex: 1;
    max-width: 400px;
  }
  .count {
    text-align: center;
    font-size: 14px;
    margin-bottom: 10px;
  }
  .container {
    padding: 12px;
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 16px;
  }
  .card {
    background: var(--card);
    border-radius: 14px;
    padding: 16px;
    box-shadow: 0 4px 12px var(--shadow);
    transition: transform 0.25s ease, box-shadow 0.25s ease;
  }
  .card:hover {
    transform: translateY(-6px);
    box-shadow: 0 6px 16px var(--shadow);
  }
  .card h3 {
    margin: 0;
    color: var(--accent);
    font-size: 18px;
  }
  .card p {
    margin: 6px 0;
    font-size: 14px;
    line-height: 1.4;
  }
  footer {
    text-align: center;
    padding: 18px;
    font-size: 13px;
    margin-top: 20px;
    background: var(--card);
    box-shadow: 0 -2px 8px var(--shadow);
  }
</style>
</head>
<body>
<header>
  <div class="title">
    <img src="https://upload.wikimedia.org/wikipedia/commons/9/9b/Flag_of_Nepal.svg" alt="Nepal Flag">
    Nepal Government Officials
  </div>
  <div class="toggles">
    <button class="toggle" id="toggleTheme">‚òÄ</button>
    <button class="toggle" id="toggleLang">EN</button>
  </div>
</header>

<div class="search-box">
  <input type="text" id="searchInput" placeholder="üîç Search by name, position or ministry...">
</div>
<div class="count" id="officialCount">Loading...</div>
<div class="container" id="officialsContainer"></div>
<footer>
  üá≥üáµ ¬© David ‚Äì Nepal Government Officials App
</footer>

<script>
let officialsData = [];
let language = "en";

async function loadOfficials() {
  try {
    const res = await fetch("https://raw.githubusercontent.com/KingStha0013/nepal-officals/main/officials.json?nocache=" + new Date().getTime());
    const data = await res.json();
    officialsData = data;
    displayOfficials(data);
  } catch (e) {
    console.error("Error fetching officials:", e);
  }
}

function displayOfficials(data) {
  const container = document.getElementById("officialsContainer");
  const search = document.getElementById("searchInput").value.toLowerCase();
  container.innerHTML = "";
  const filtered = data.filter(o =>
    (language==="en"? o.name.toLowerCase() : (o.name_np||o.name).toLowerCase()).includes(search) ||
    (language==="en"? o.position.toLowerCase() : (o.position_np||o.position).toLowerCase()).includes(search) ||
    (language==="en"? o.ministry.toLowerCase() : (o.ministry_np||o.ministry).toLowerCase()).includes(search)
  );
  document.getElementById("officialCount").textContent = `Showing ${filtered.length} of ${data.length} officials`;
  filtered.forEach(o => {
    const card = document.createElement("div");
    card.className = "card";
    card.innerHTML = `
      <h3>${language==="en"? o.name : (o.name_np||o.name)}</h3>
      <p><b>${language==="en"?"Position":"‡§™‡§¶"}:</b> ${language==="en"? o.position : (o.position_np||o.position)}</p>
      <p><b>${language==="en"?"Ministry":"‡§Æ‡§®‡•ç‡§§‡•ç‡§∞‡§æ‡§≤‡§Ø"}:</b> ${language==="en"? o.ministry : (o.ministry_np||o.ministry)}</p>
      ${o.seat ? `<p><b>Seat:</b> ${o.seat}</p>` : ""}
    `;
    container.appendChild(card);
  });
}

document.getElementById("searchInput").addEventListener("input", () => displayOfficials(officialsData));

document.getElementById("toggleTheme").addEventListener("click", () => {
  document.body.classList.toggle("dark");
  document.getElementById("toggleTheme").textContent = document.body.classList.contains("dark") ? "üåô" : "‚òÄ";
});

document.getElementById("toggleLang").addEventListener("click", () => {
  language = language === "en" ? "np" : "en";
  document.getElementById("toggleLang").textContent = language==="en"? "EN":"‡§®‡•á";
  displayOfficials(officialsData);
});

loadOfficials();
setInterval(loadOfficials, 40000);
</script>
</body>
</html>