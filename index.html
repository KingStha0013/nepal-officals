<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Nepal Officials</title>
<link rel="icon" href="https://upload.wikimedia.org/wikipedia/commons/9/9b/Flag_of_Nepal.svg">
<style>
:root{
  --bg:#f0f3f7;
  --card:#fff;
  --text:#222;
  --accent:#ff6b6b;
  --secondary:#4ecdc4;
  --shadow:rgba(0,0,0,0.12);
}
body{
  margin:0;font-family:'Poppins',sans-serif;
  background:var(--bg);color:var(--text);
  transition:0.3s all;
}
body.dark{
  --bg:#121212;--card:#1e1e1e;--text:#eee;--shadow:rgba(255,255,255,0.05);
}

/* Header */
header{
  display:flex;align-items:center;justify-content:center;
  gap:10px;padding:20px;font-weight:600;font-size:1.5em;
  background: var(--secondary);color:#fff;position:sticky;top:0;z-index:100;
  border-bottom-left-radius:15px;border-bottom-right-radius:15px;
  box-shadow:0 6px 12px var(--shadow);
}
header img{height:32px;}

/* Controls */
#controls{
  display:flex;gap:10px;padding:15px;margin:10px;
  background:var(--card);border-radius:15px;box-shadow:0 4px 12px var(--shadow);
}
#search{flex:1;padding:10px 15px;border-radius:12px;border:1px solid #ccc;font-size:14px;}
#toggleTheme{padding:10px 16px;border:none;border-radius:12px;background:var(--accent);color:#fff;font-weight:600;cursor:pointer;transition:0.3s;}
#toggleTheme:hover{opacity:0.85;}

/* Cards Grid */
.cards{display:grid;grid-template-columns:1fr;gap:20px;padding:15px;}
@media(min-width:600px){.cards{grid-template-columns:1fr 1fr;}}
@media(min-width:900px){.cards{grid-template-columns:1fr 1fr 1fr;}}

/* Card */
.card{
  background:var(--card);border-radius:20px;padding:18px;
  box-shadow:0 8px 20px var(--shadow);
  transition: transform 0.35s ease, box-shadow 0.35s ease;
  opacity:0;transform:scale(0.95) translateY(20px);
  animation:cardFadeIn 0.5s forwards;
}
.card:hover{transform:scale(1.02) translateY(-5px);box-shadow:0 14px 28px var(--shadow);}
.card h3{margin:0;color:var(--accent);}
.card p{margin:5px 0;font-size:0.95em;line-height:1.3;}

@keyframes cardFadeIn{
  to{opacity:1;transform:scale(1) translateY(0);}
}

/* Footer */
footer{text-align:center;padding:15px;background:var(--card);border-top-left-radius:15px;border-top-right-radius:15px;box-shadow:0 -4px 12px var(--shadow);font-size:13px;}
</style>
</head>
<body>

<header>
  <img src="https://upload.wikimedia.org/wikipedia/commons/9/9b/Flag_of_Nepal.svg" alt="Nepal Flag">
  Nepal Officials
</header>

<div id="controls">
  <input type="text" id="search" placeholder="Search officials...">
  <button id="toggleTheme">üåô</button>
</div>

<div class="cards" id="cards">
  <p style="text-align:center;">Loading officials...</p>
</div>

<footer>¬© David | Auto-update every 40s</footer>

<script>
const cardsContainer = document.getElementById("cards");
const toggleTheme = document.getElementById("toggleTheme");
const searchInput = document.getElementById("search");

async function loadOfficials(){
  try{
    const res = await fetch("https://raw.githubusercontent.com/KingStha0013/nepal-officals/main/officials.json?ts=" + Date.now());
    const data = await res.json();
    displayOfficials(data);
  }catch(err){
    cardsContainer.innerHTML="<p style='color:red;text-align:center;'>‚ùå Failed to load officials.</p>";
    console.error(err);
  }
}

function displayOfficials(list){
  cardsContainer.innerHTML="";
  list.forEach((o,i)=>{
    const card=document.createElement("div");
    card.className="card";
    card.style.animationDelay=`${i*0.05}s`;
    card.innerHTML=`<h3>${o.name}</h3>
                    <p><strong>Position:</strong> ${o.position}</p>
                    <p><strong>Ministry:</strong> ${o.ministry}</p>`;
    cardsContainer.appendChild(card);
  });
}

searchInput.addEventListener("input",e=>{
  const q=e.target.value.toLowerCase();
  document.querySelectorAll(".card").forEach(c=>{
    c.style.display=c.textContent.toLowerCase().includes(q)?"":"none";
  });
});

toggleTheme.addEventListener("click",()=>{
  document.body.classList.toggle("dark");
  toggleTheme.textContent=document.body.classList.contains("dark")?"‚òÄÔ∏è":"üåô";
});

loadOfficials();
setInterval(loadOfficials,40000);
</script>

</body>
</html>